name: AKS Deployment

on: workflow_dispatch

env:
  REGISTRY: ghcr.io
  IMAGE_NAME: ${{ github.repository }}

permissions:
    contents: read
    packages: write
    attestations: write
    id-token: write

jobs:   
  deploy:
    uses: CSCorpIt/reusable-workflows/.github/workflows/aks_deploy.yml@main
    with:
      azure-aks: 'backstage-aks'
      azure-aks-rg: 'backstage-aks-rg'
    secrets:
      AZURE_CLIENT_ID: ${{ secrets.AZURE_GITHUB_APP }}
      AZURE_SUB_ID: ${{ secrets.AZURE_SUBSCRIPTION_ID }}
      AZURE_TENANT_ID: ${{ secrets.AZURE_TENANT_ID }}
